{% extends "base.html" %}
{% load thumbnail %}

{% block title %}{{ user.get_full_name }}{% endblock %}

{% block content %}

<section class="profile-two">
	  <div class="container-fluid">
	   <div class="row">

		<div class="col-lg-3">
         <aside id="leftsidebar" class="sidebar">
		  <ul class="list">
           <li>
			<div class="user-info">
			 <div class="image">

				{% if user.profile.photo %}
					<a href="#">
					 <img src="{{ user.profile.photo.url }}" class="img-responsive img-circle" alt="User">
	<!--			   <span class="online-status online"></span>-->
					</a>
			 	{% else %}
					<a href="#">
					 <img src="/static/img/person.jpg" class="img-responsive img-circle" alt="User">
	<!--			   <span class="online-status online"></span>-->
					</a>
			 	{% endif %}

			 </div>
		     <div class="detail">
			  <h4>{{ user.get_full_name }}</h4>
			  <small>{{ user.username }}@</small>
			 </div>
			 <div class="row">
<!--			  <div class="col-12">-->
<!--			   <a title="facebook" href="#" class=" waves-effect waves-block"><i class="fab fa-facebook"></i></a>-->
<!--			   <a title="twitter" href="#" class=" waves-effect waves-block"><i class="fab fa-twitter"></i></a>-->
<!--			   <a title="instagram" href="#" class=" waves-effect waves-block"><i class="fab fa-instagram"></i></a>-->
<!--			  </div>-->
			 </div>
			</div>
           </li>
           <li>
            <small class="text-muted"><a href="#">{{user.images_created.count}} &nbsp; &nbsp; پست</a> </small><br>
            <small class="text-muted"><a href="#">{{user.followers.count}}&nbsp; &nbsp; دنبال کننده </a> </small><br>
            <small class="text-muted"><a href="#">{{user.following.count}}&nbsp; &nbsp; دنبال شده </a> </small>
            <hr>
            <small class="text-muted">بیوگرافی: </small>
            <p>{{user.profile.bio}}</p>
           </li>
          </ul>
         </aside>
		</div><!--/ col-lg-3-->

		<div class="col-lg-6" style="background: #fff;">

		 <div class="row">

		  <div class="col-lg-6">
			 <a href="#myModal" data-toggle="modal">
			 <div class="explorebox" style="background: linear-gradient( rgba(34,34,34,0.2), rgba(34,34,34,0.2)), url('assets/img/posts/6.jpg') no-repeat;
					  background-size: cover;
					  background-position: center center;
					  -webkit-background-size: cover;
					  -moz-background-size: cover;
					  -o-background-size: cover;">
			  <div class="explore-top">
			   <div class="explore-like"><i class="fa fa-heart"></i> <span>312</span></div>
			   <div class="explore-circle pull-right"><i class="far fa-bookmark"></i></div>
			  </div>
			 </div>
			 </a>
		  </div>

		  <div class="col-lg-6">
			 <a href="#myModal" data-toggle="modal">
			 <div class="explorebox" style="background: linear-gradient( rgba(34,34,34,0.2), rgba(34,34,34,0.2)), url('assets/img/posts/9.jpg') no-repeat;
					  background-size: cover;
					  background-position: center center;
					  -webkit-background-size: cover;
					  -moz-background-size: cover;
					  -o-background-size: cover;">
			  <div class="explore-top">
			   <div class="explore-like"><i class="fa fa-heart"></i> <span>624</span></div>
			   <div class="explore-circle pull-right"><i class="far fa-bookmark"></i></div>
			  </div>
			 </div>
			 </a>
		  </div>

		 </div><!--/ row -->

		 <div class="row">

		  <div class="col-lg-6">
			 <a href="#myModal" data-toggle="modal">
			 <div class="explorebox" style="background: linear-gradient( rgba(34,34,34,0.2), rgba(34,34,34,0.2)), url('assets/img/posts/32.jpg') no-repeat;
					  background-size: cover;
					  background-position: center center;
					  -webkit-background-size: cover;
					  -moz-background-size: cover;
					  -o-background-size: cover;">
			  <div class="explore-top">
			   <div class="explore-like"><i class="fa fa-heart"></i> <span>12</span></div>
			   <div class="explore-circle pull-right"><i class="far fa-bookmark"></i></div>
			  </div>
			 </div>
			 </a>
		  </div>

		  <div class="col-lg-6">
			 <a href="#myModal" data-toggle="modal">
			 <div class="explorebox" style="background: linear-gradient( rgba(34,34,34,0.2), rgba(34,34,34,0.2)), url('assets/img/posts/30.jpg') no-repeat;
					  background-size: cover;
					  background-position: center center;
					  -webkit-background-size: cover;
					  -moz-background-size: cover;
					  -o-background-size: cover;">
			  <div class="explore-top">
			   <div class="explore-like"><i class="fa fa-heart"></i> <span>1499</span></div>
			   <div class="explore-circle pull-right"><i class="far fa-bookmark"></i></div>
			  </div>
			 </div>
			 </a>
		  </div>

		 </div><!--/ row -->

		 <div class="row">

		  <div class="col-lg-6">
			 <a href="#myModal" data-toggle="modal">
			 <div class="explorebox" style="background: linear-gradient( rgba(34,34,34,0.2), rgba(34,34,34,0.2)), url('assets/img/posts/19.jpg') no-repeat;
					  background-size: cover;
					  background-position: center center;
					  -webkit-background-size: cover;
					  -moz-background-size: cover;
					  -o-background-size: cover;">
			  <div class="explore-top">
			   <div class="explore-like"><i class="fa fa-heart"></i> <span>1742</span></div>
			   <div class="explore-circle pull-right"><i class="far fa-bookmark"></i></div>
			  </div>
			 </div>
			 </a>
		  </div>

		  <div class="col-lg-6">
			 <a href="#myModal" data-toggle="modal">
			 <div class="explorebox" style="background: linear-gradient( rgba(34,34,34,0.2), rgba(34,34,34,0.2)), url('assets/img/posts/8.jpg') no-repeat;
					  background-size: cover;
					  background-position: center center;
					  -webkit-background-size: cover;
					  -moz-background-size: cover;
					  -o-background-size: cover;">
			  <div class="explore-top">
			   <div class="explore-like"><i class="fa fa-heart"></i> <span>1269</span></div>
			   <div class="explore-circle pull-right"><i class="far fa-bookmark"></i></div>
			  </div>
			 </div>
			 </a>
		  </div>

		 </div><!--/ row -->

		 <div class="row">

		  <div class="col-lg-6">
			 <a href="#myModal" data-toggle="modal">
			 <div class="explorebox" style="background: linear-gradient( rgba(34,34,34,0.2), rgba(34,34,34,0.2)), url('assets/img/posts/36.jpg') no-repeat;
					  background-size: cover;
					  background-position: center center;
					  -webkit-background-size: cover;
					  -moz-background-size: cover;
					  -o-background-size: cover;">
			  <div class="explore-top">
			   <div class="explore-like"><i class="fa fa-heart"></i> <span>12456</span></div>
			   <div class="explore-circle pull-right"><i class="far fa-bookmark"></i></div>
			  </div>
			 </div>
			 </a>
		  </div>

		  <div class="col-lg-6">
			 <a href="#myModal" data-toggle="modal">
			 <div class="explorebox" style="background: linear-gradient( rgba(34,34,34,0.2), rgba(34,34,34,0.2)), url('assets/img/posts/25.jpg') no-repeat;
					  background-size: cover;
					  background-position: center center;
					  -webkit-background-size: cover;
					  -moz-background-size: cover;
					  -o-background-size: cover;">
			  <div class="explore-top">
			   <div class="explore-like"><i class="fa fa-heart"></i> <span>10945</span></div>
			   <div class="explore-circle pull-right"><i class="far fa-bookmark"></i></div>
			  </div>
			 </div>
			 </a>
		  </div>

		 </div><!--/ row -->

		</div>

			<div class="col-lg-3">
			{% if suggested_user %}

				 <div class="suggestion-box full-width">
					<div class="suggestions-list">
						{% for user in suggested_user %}
							{% if user != current_user %}
								<div class="suggestion-body">
									{% if user.profile.photo %}
										{% with ph=user.profile.photo %}
												<a href="{{ user.get_absolute_url }}"><img class="img-responsive img-circle" src="{{ph.url}}" alt="Image"></a>
										{% endwith %}
									{% else %}
										<a href="{{ user.get_absolute_url }}"><img class="img-responsive img-circle" src="/static/img/person.jpg" alt="Image"></a>
									{% endif %}
									<div class="name-box">
										<h4>{{user.first_name}}</h4>
										<span>@{{user.username}}</span>
									</div>
			<!--						<span><i class="fa fa-plus"></i></span>-->
								</div>
							{% endif %}
						{% endfor %}
					</div><!--suggestions-list end-->
				</div>
			{% endif %}

		<div class="trending-box">
		 <div class="row">
			<div class="col-lg-12">
				<h4>بیشترین بازدیدها</h4>
			</div>
		 </div>
		</div>

		<div class="trending-box">
		 <div class="row">
			{% for image in most_viewed %}
			 {% thumbnail image.image "280x200" crop="100%" as im %}
					<div class="col-md-6">
					 <a href="{{ image.get_absolute_url }}"><img src="{{im.url}}" class="{{image.filter}} img-responsive" alt="Image"></a>
					</div>
				{% endthumbnail %}
			{% endfor %}
		 </div>
		</div>
		<div class="row bookmark">
			<a href="javascript:{% include "bookmarklet_launcher.js" %}" class="bookmark_button button">بوک مارک کنید</a>
		</div>
		</div>

       </div><!--/ row-->
	  </div><!--/ container -->
	 </section>
{% endblock %}

{% block domready %}
    $('a.follow').click(function(e){
        e.preventDefault();
        $.post('{% url "user_follow" %}',
        {
            id: $(this).data('id'),
            action: $(this).data('action')
        },
        function(data){
            if (data['status'] == 'ok') {
                var previous_action = $('a.follow').data('action');
                // toggle data-action
                $('a.follow').data('action',
                    previous_action == 'follow' ? 'unfollow' : 'follow');
                // toggle link text
                $('a.follow').text(
                    previous_action == 'follow' ? 'Unfollow' : 'Follow');
                // update total followers
                var previous_followers = parseInt($('span.count .total').text());
                $('span.count .total').text(previous_action == 'follow' ?
                    previous_followers + 1 : previous_followers - 1);
            }
        }
    );
});
{% endblock %}